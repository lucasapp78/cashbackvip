
<!DOCTYPE html>

<html lang="pt-br">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>L.A Cashback VIP üëë</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f7f7f7; margin: 0; }
    h2 { text-align: center; color: #333; }

    label, select, input {
      display: block; width: 100%; margin-bottom: 12px;
      font-size: 1rem; padding: 10px; border-radius: 5px;
      border: 1px solid #ccc; box-sizing: border-box;
    }

    button {
      width: 100%; padding: 14px; background-color: #007BFF;
      color: white; font-size: 1.1rem; border: none;
      border-radius: 8px; margin-top: 10px; cursor: pointer;
    }

    button:hover { background-color: #0056b3; }

    .game-card {
      background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      padding: 15px; margin-bottom: 15px;
    }

    .game-title {
      font-weight: bold; margin-bottom: 10px;
    }

    .game-option {
      margin-bottom: 6px;
      display: flex; align-items: center;
    }

    .game-option input {
      margin-right: 8px;
    }

    .icon {
      display: inline-block; width: 20px; text-align: center;
      margin-right: 6px;
    }

    .search-bar {
      margin-bottom: 15px;
      padding: 10px;
      font-size: 1rem;
      border-radius: 5px;
      border: 1px solid #ccc;
      width: 100%;
      box-sizing: border-box;
    }

    .button-group {
      display: flex; gap: 10px; margin-bottom: 10px;
    }

    .combo-card {
      background: #fff; color: #000;
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }

    .combo-card h4 {
      margin: 0 0 8px 0;
      color: #007BFF;
      font-size: 1.1rem;
    }

    .combo-card p {
      margin: 4px 0;
      font-size: 1rem;
      line-height: 1.4;
    }

    .combo-retorno {
      font-weight: bold;
      color: green;
      margin-top: 8px;
    }
  </style>
</head>
<body>
<h2>L.A Cashback VIP üëë</h2>
<!-- Novas funcionalidades -->
<label for="liga">Escolha a Liga:</label>
<select id="liga">
<option value="soccer_brazil_campeonato">Brasileir√£o</option>
<option value="soccer_epl">Premier League</option>
<option value="soccer_uefa_champs_league">Champions League</option>
<option value="soccer_copa_libertadores">Libertadores</option>
</select>
<label for="tipoAposta">Modo de aposta:</label>
<select id="tipoAposta">
<option value="simples">Simples (1X2)</option>
<option value="outros">Outro Mercado (totals, correct_score)</option>
<option value="placar">Placar Exato</option>
<option value="btts">Ambas Marcam (BTTS)</option>
<option value="over25">Mais de 2.5 Gols</option>
<option value="under25">Menos de 2.5 Gols</option>
<option value="dupla">Dupla Chance</option>
<option value="resultado_gols">Resultado + Gols</option>
</select>
<div style="display: flex; gap: 10px;">
<div style="flex:1">
<label for="oddMin">Odd m√≠nima:</label>
<input id="oddMin" step="0.01" type="number" value="1.10"/>
</div>
<div style="flex:1">
<label for="oddMax">Odd m√°xima:</label>
<input id="oddMax" step="0.01" type="number" value="10.00"/>
</div>
</div>
<button onclick="carregarOddsReais()">üîÑ Carregar Odds Reais</button>
<input class="search-bar" id="filtro" placeholder="Filtrar por nome do time..." type="text"/>
<input class="search-bar" id="filtroCompeticao" placeholder="Filtrar por competi√ß√£o ou data..." type="text"/>
<div class="button-group">
<button onclick="selecionarTodos()">Selecionar Todos</button>
<button onclick="limparSelecao()">Limpar Sele√ß√£o</button>
<button onclick="montarMelhorCombo()">üéØ Melhor Combo</button>
</div>
<div id="inputs"></div>
<label for="tipoDesdobramento">Tipo de aposta (acertos):</label>
<select id="tipoDesdobramento">
<option value="1">1 (simples)</option><option value="2">2 (duplas)</option>
<option value="3">3 (trios)</option><option value="4">4 (quartetos)</option>
<option value="5">5 (quinas)</option><option value="6">6 (senas)</option>
<option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option>
</select>
<input id="stake" placeholder="Valor por combina√ß√£o (R$)" step="0.01" type="number" value="10">
<button onclick="gerarDesdobramento()">Gerar L.A Cashback VIP üëë</button>
<div class="button-group">
<button onclick="baixarTXT()">üìÑ Baixar .txt</button>
<button onclick="baixarPDF()">üì• Baixar PDF</button>
</div>
<div id="resultado"></div>
<script>
function gerarCombinacoes(array, k) {
  let res = [];
  function comb(start, combo) {
    if (combo.length === k) return res.push(combo);
    for (let i = start; i < array.length; i++) {
      comb(i + 1, combo.concat([array[i]]));
    }
  }
  comb(0, []);
  return res;
}

let ultimaCombinacao = [];

function gerarDesdobramento(combinacoesPersonalizadas = null) {
  const tipoDesdobramento = parseInt(document.getElementById("tipoDesdobramento").value);
  const stake = parseFloat(document.getElementById("stake").value);
  const checkboxes = document.querySelectorAll(".jogoCheck:checked");

  if (checkboxes.length < tipoDesdobramento && !combinacoesPersonalizadas) {
    alert(`Voc√™ selecionou apenas ${checkboxes.length} jogos, mas escolheu um desdobramento de ${tipoDesdobramento}.`);
    return;
  }

  if (isNaN(stake) || stake <= 0) {
    alert("Insira valor de aposta v√°lido.");
    return;
  }

  const jogos = combinacoesPersonalizadas || Array.from(checkboxes).map(cb => ({
    jogo: cb.dataset.nome,
    odd: parseFloat(cb.dataset.odd)
  }));

  const combinacoes = combinacoesPersonalizadas || gerarCombinacoes(jogos, tipoDesdobramento);
  ultimaCombinacao = combinacoes;

  let html = `<h3>Combina√ß√µes ${tipoDesdobramento} (${document.querySelector("#tipoAposta option:checked").textContent})</h3>`;
  let totalRetorno = 0;

  combinacoes.forEach((combo, i) => {
    const oddTotal = combo.reduce((acc, cur) => acc * cur.odd, 1);
    const retorno = stake * oddTotal;
    totalRetorno += retorno;

    const selecoes = combo.map(j => `- ${j.jogo.split(" - ")[1]} (${j.odd.toFixed(2)})`).join("<br>");

    html += `
      <div class="combo-card">
        <h4>Bilhete ${i + 1} - Odd Total: ${oddTotal.toFixed(2)}</h4>
        <p>${selecoes}</p>
        <div class="combo-retorno">Retorno: R$ ${retorno.toFixed(2)}</div>
      </div>`;
  });

  const totalApostado = (combinacoes.length * stake).toFixed(2);
  html += `
    <p><strong>Total de combina√ß√µes:</strong> ${combinacoes.length}</p>
    <p><strong>Total Apostado:</strong> R$ ${totalApostado}</p>
    <p style="color:green;"><strong>Retorno estimado se acertar todos:</strong> R$ ${totalRetorno.toFixed(2)}</p>`;

  document.getElementById("resultado").innerHTML = html;
}



async function carregarOddsReais() {
  const API_KEY = "69b92fb729838ba69139a6d92c457f83";

  alert("‚ö†Ô∏è A integra√ß√£o com a API-Football ainda est√° sendo configurada. Em breve os dados reais aparecer√£o aqui.");

  // TODO: Substituir por chamada real √† API-Football (https://api-football.com/documentation-v3)
  // Exemplo de chamada usando fetch:
  /*
  const response = await fetch("https://v3.football.api-sports.io/fixtures?league=71&season=2024", {
    headers: { "x-apisports-key": API_KEY }
  });
  const data = await response.json();
  console.log(data);
  */
}
</script>
</input></body>
</html>
