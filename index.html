
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>L.A Cashback VIP ðŸ‘‘</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f7f7f7; margin: 0; }
    h2 { text-align: center; color: #333; }
    label, select, input {
      display: block; width: 100%; margin-bottom: 12px;
      font-size: 1rem; padding: 10px; border-radius: 5px;
      border: 1px solid #ccc; box-sizing: border-box;
    }
    button {
      width: 100%; padding: 14px; background-color: #007BFF;
      color: white; font-size: 1.1rem; border: none;
      border-radius: 8px; margin-top: 10px; cursor: pointer;
    }
    button:hover { background-color: #0056b3; }
    #inputs > div { margin-bottom: 10px; }
    .jogoCheck { margin-right: 10px; }
  </style>
</head>
<body>
  <h2>L.A Cashback VIP ðŸ‘‘</h2>

  <label for="tipoAposta">Modo de aposta:</label>
  <select id="tipoAposta">
    <option value="simples">Simples (1X2)</option>
    <option value="placar">Placar Exato</option>
    <option value="btts">Ambas Marcam (BTTS)</option>
    <option value="over25">Mais de 2.5 Gols</option>
    <option value="under25">Menos de 2.5 Gols</option>
    <option value="dupla">Dupla Chance</option>
    <option value="resultado_gols">Resultado + Gols</option>
  </select>

  <div style="display: flex; gap: 10px;">
    <div style="flex:1">
      <label for="oddMin">Odd mÃ­nima:</label>
      <input type="number" id="oddMin" step="0.01" value="1.10" />
    </div>
    <div style="flex:1">
      <label for="oddMax">Odd mÃ¡xima:</label>
      <input type="number" id="oddMax" step="0.01" value="10.00" />
    </div>
  </div>

  <button onclick="carregarOddsReais()">ðŸ”„ Carregar Odds Reais (Campeonato Brasileiro)</button>

  <div id="inputs"></div>

  <label for="tipoDesdobramento">Tipo de aposta (acertos):</label>
  <select id="tipoDesdobramento">
    <option value="1">1 (simples)</option><option value="2">2 (duplas)</option>
    <option value="3">3 (trios)</option><option value="4">4 (quartetos)</option>
    <option value="5">5 (quinas)</option><option value="6">6 (senas)</option>
    <option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option>
  </select>

  <input type="number" step="0.01" placeholder="Valor por combinaÃ§Ã£o (R$)" id="stake" value="10" />
  <button onclick="gerarDesdobramento()">Gerar L.A Cashback VIP ðŸ‘‘</button>
  <div id="resultado"></div>

<script>
function gerarCombinacoes(array, k) {
  let res = [];
  function comb(start, combo) {
    if (combo.length === k) return res.push(combo);
    for (let i = start; i < array.length; i++) {
      comb(i + 1, combo.concat([array[i]]));
    }
  }
  comb(0, []);
  return res;
}

function gerarDesdobramento() {
  const tipo = document.getElementById("tipoAposta").value;
  const tipoDesdobramento = parseInt(document.getElementById("tipoDesdobramento").value);
  const stake = parseFloat(document.getElementById("stake").value);
  const checkboxes = document.querySelectorAll(".jogoCheck:checked");

  if (checkboxes.length < tipoDesdobramento) {
    alert(`VocÃª selecionou apenas ${checkboxes.length} jogos, mas escolheu um desdobramento de ${tipoDesdobramento}.`);
    return;
  }

  if (isNaN(stake) || stake <= 0) {
    alert("Insira valor de aposta vÃ¡lido.");
    return;
  }

  const jogos = Array.from(checkboxes).map(cb => ({
    jogo: cb.dataset.nome,
    odd: parseFloat(cb.dataset.odd)
  }));

  const combinacoes = gerarCombinacoes(jogos, tipoDesdobramento);
  let html = `<h3>${tipoDesdobramento === 1 ? 'Apostas Simples' : `CombinaÃ§Ãµes ${tipoDesdobramento}`} (${document.querySelector("#tipoAposta option:checked").textContent})</h3>`;
  html += `<table border="1" cellpadding="5" cellspacing="0"><thead><tr><th>#</th><th>CombinaÃ§Ã£o</th><th>Odd Total</th><th>Retorno</th></tr></thead><tbody>`;

  let totalRetorno = 0;

  combinacoes.forEach((combo, i) => {
    const nomes = combo.map(j => `${j.jogo} (${j.odd.toFixed(2)})`).join(", ");
    const oddTotal = combo.reduce((acc, cur) => acc * cur.odd, 1);
    const retorno = stake * oddTotal;
    totalRetorno += retorno;

    html += `
      <tr>
        <td>${i + 1}</td>
        <td>${nomes}</td>
        <td>${oddTotal.toFixed(2)}</td>
        <td>R$ ${retorno.toFixed(2)}</td>
      </tr>`;
  });

  const totalApostado = (combinacoes.length * stake).toFixed(2);
  html += `</tbody></table>
           <p><strong>Total de combinaÃ§Ãµes:</strong> ${combinacoes.length}</p>
           <p><strong>Total Apostado:</strong> R$ ${totalApostado}</p>
           <p style="color:green;"><strong>Retorno estimado se acertar todos os jogos:</strong> R$ ${totalRetorno.toFixed(2)}</p>`;

  document.getElementById("resultado").innerHTML = html;
}

async function carregarOddsReais() {
  const API_KEY = "d4d52d8e8d186ecee91808ff600dcd63";
  const url = `https://api.the-odds-api.com/v4/sports/soccer_brazil_campeonato/odds/?regions=us&markets=h2h&oddsFormat=decimal&apiKey=${API_KEY}`;

  try {
    const response = await fetch(url);
    if (!response.ok) throw new Error("Erro na resposta da API");

    const data = await response.json();
    const inputs = document.getElementById("inputs");
    const oddMin = parseFloat(document.getElementById("oddMin").value) || 1.10;
    const oddMax = parseFloat(document.getElementById("oddMax").value) || 10.00;
    document.getElementById("tipoAposta").value = "simples";

    inputs.innerHTML = "<p><strong>Selecione os jogos que deseja usar:</strong></p>";
    let jogoCount = 0;

    data.forEach((jogo, i) => {
      const mercado = jogo?.bookmakers?.[0]?.markets?.[0];
      if (!mercado || mercado.outcomes.length < 2) return;

      const outcomeA = mercado.outcomes[0];
      const outcomeB = mercado.outcomes[1];
      const maiorOdd = Math.max(outcomeA.price, outcomeB.price);

      if (maiorOdd < oddMin || maiorOdd > oddMax) return;

      jogoCount++;
      inputs.innerHTML += `
        <div>
          <label>
            <input type="checkbox" class="jogoCheck" data-nome="${outcomeA.name} ou ${outcomeB.name}" data-odd="${maiorOdd.toFixed(2)}" />
            ${outcomeA.name} ou ${outcomeB.name} - Odd: ${maiorOdd.toFixed(2)}
          </label>
        </div>`;
    });

    if (jogoCount === 0) {
      inputs.innerHTML += "<p style='color:red;'>Nenhuma odd encontrada no intervalo definido.</p>";
    } else {
      alert("Selecione os jogos desejados.");
    }

  } catch (err) {
    console.error("Erro ao buscar odds reais:", err);
    alert("Erro ao buscar odds. Tente novamente mais tarde.");
  }
}
</script>

</body>
</html>
